Ниже представлен ряд вопросов по SQL.
Это те вопросы, которые интервьюеры часто задают на собеседованиях. Я старался подобрать как можно больше вопросов, которые задают аналитикам/инженерам данных.
После каждого вопроса дан ответ. Но для самопроверки попробуйте сперва ответить сами, не подглядывая в шпаргалку.

#### Что такое SQL?
<details>
<summary>Ответ</summary>
SQL  (Structured Query Language) расшифровывается как язык структурированных запросов. Это стандартный язык для СУБД. Он особенно полезен при обработке организованных данных, состоящих из сущностей (переменных) и отношений между различными сущностями данных.
</details>

#### Что такое таблицы и поля?
<details>
<summary>Ответ</summary>
Таблица - это организованный набор данных, хранящихся в виде строк и столбцов. Столбцы могут быть классифицированы как вертикальные поля, а строки - как горизонтальные. Поля - это колонки в таблице, предназначенные для хранения информации.
</details>

#### Что такое база данных?
<details>
<summary>Ответ</summary>
Можно дать несколько разных определений. Ниже представлены те, которые я считаю наиболее удачными.

_База данных_ - это совокупность данных, хранящихся и извлекаемых в цифровом виде из удалённой или локальной компьютерной системы.

_База данных_ - это упорядоченный набор структурированной информации или данных, которые обычно хранятся в электронном виде в компьютерной системе. База данных обычно управляется системой управления базами данных (СУБД).

_База данных_ - это совокупность данных, хранимых в соответствии со схемой данных, манипулирование которыми выполняют в соответствии с правилами средств моделирования данных
</details>

#### Что такое СУБД?
<details>
<summary>Ответ</summary>
СУБД расшифровывается как Система Управления Базами Данных. СУБД - это системное программное обеспечение, ответственное за создание, поиск, обновление и управление базы данных. СУБД гарантирует, наши данные организованы и легкодоступны, выступая в качестве интерфейса между базой данных и её конечными пользователями.
</details>

#### Что такое РСУБД? В чём заключается её отличие от СУБД?
<details>
<summary>Ответ</summary>
_РСУБД_ - Реляционная Система Управления Базами Данных. Ключевое отличие здесь, по сравнению с СУБД, заключается в том, что РСУБД хранит данные в виде набора таблиц, и между общими полями этих таблиц могут существовать отношения. Большинство современных систем управления базами данных, таких как MySQL, Microsoft SQL Server, Oracle, IBM DB2 и Amazon Redshift, основаны на РСУБД.
</details>

#### Что такое нормализация?
<details>
<summary>Ответ</summary>
Нормализация — это процесс организации данных в базе данных, включающий создание таблиц и установление отношений между ними в соответствии с правилами, которые обеспечивают защиту данных и делают базу данных более гибкой, устраняя избыточность и несогласованные зависимости.
</details>

#### Что такое денормализация?
<details>
<summary>Ответ</summary>
Денормализация - это процесс обратный нормализации. При денормализации нормализованная схема преобразуется в схему, содержащую избыточную информацию. Производительность повышается за счет использования избыточности и обеспечения согласованности избыточных данных. Причиной выполнения денормализации являются накладные расходы, возникающие в процессоре запросов из-за чрезмерно нормализованной структуры.
</details>

#### Расскажите про нормальные формы. Какие они бывают и чем отличаются?
<details>
<summary>Ответ</summary>

_Нормальная форма_ — требование, предъявляемое к структуре таблиц в теории реляционных баз данных для устранения из базы избыточных функциональных зависимостей между атрибутами (полями таблиц).
Всего существует шесть нормальных форм. Самая основная и наиболее часто используемая - третья нормальная форма (3НФ), по этому тут будет дано определение только первых трёх нормальных форм.

_Первая нормальная форма_ - оношение находится в 1НФ, если все его атрибуты[^1] являются простыми, все используемые домены[^2] должны содержать только скалярные значения. Не должно быть повторений строк в таблице.

_Вторая нормальная форма_ - отношение находится во 2НФ, если оно находится в 1НФ и каждый не ключевой атрибут неприводимо зависит от Первичного Ключа(ПК). Неприводимость означает, что в составе потенциального ключа отсутствует меньшее подмножество атрибутов, от которого можно также вывести данную функциональную зависимость.

_Третья нормальная форма_ - отношение находится в 3НФ, когда находится во 2НФ и каждый не ключевой атрибут нетранзитивно зависит от первичного ключа. Проще говоря, требуется выносить все не ключевые поля, содержимое которых может относиться к нескольким записям таблицы в отдельные таблицы.

_Нормальная форма Бойса-Кодда (НФБК)_ - это частная форма третьей нормальной формы.

Определение 3НФ не совсем подходит для следующих отношений:
1) отношение имеет два или более потенциальных ключа;
2) два и более потенциальных ключа являются составными;
3) они пересекаются, т.е. имеют хотя бы один общий атрибут.

Для отношений, имеющих один потенциальный ключ (первичный), НФБК является 3НФ. Отношение находится в НФБК, когда каждая нетривиальная и неприводимая слева функциональная зависимость обладает потенциальным ключом в качестве детерминанта.

[^1]: Атрибут — свойство некоторой сущности. Часто называется полем таблицы.

[^2]: Домен атрибута — множество допустимых значений, которые может принимать атрибут.
</details>

#### Из каких подмножеств состоит SQL?
<details>
<summary>Ответ</summary>
DDL (Data Definition Language, язык описания данных) — позволяет выполнять различные операции с базой данных, такие как CREATE (создание), ALTER (изменение) и DROP (удаление объектов).
DML (Data Manipulation Language, язык управления данными) — позволяет получать доступ к данным и манипулировать ими, например, вставлять, обновлять, удалять и извлекать данные из базы данных.
DCL (Data Control Language, язык контролирования данных) — позволяет контролировать доступ к базе данных. Пример — GRANT (предоставить права), REVOKE (отозвать права).
</details>

#### Что такое первичный ключ?
<details>
<summary>Ответ</summary>
Первичный ключ (PRIMARY KEY) предназначен для однозначной идентификации каждой записи в таблице и является строго уникальным (UNIQUE): две записи таблицы не могут иметь одинаковые значения первичного ключа. Нулевые значения (NULL) в PRIMARY KEY не допускаются. Если в качестве PRIMARY KEY используется несколько полей, их называют составным ключом.
</details>

#### Когда используется первичный ключ?
<details>
<summary>Ответ</summary>
Первичный ключ используется в качестве основного ключа и может быть использован для связи с дочерней таблицей, содержащей внешний ключ.
</details>

#### Что такое внешний ключ?
<details>
<summary>Ответ</summary>
Внешний ключ или FOREIGN KEY также является атрибутом ограничения и обеспечивает связь двух таблиц. По сути, это поле или несколько полей, которые ссылаются на PRIMARY KEY в родительской таблице.
</details>

#### Чем NULL отличается от 0?
<details>
<summary>Ответ</summary>
0 - это число.
NULL - это не число, а также NULL не является значением пустой строки. NULL используется для указания того, что данные отсутствуют, неизвестны, неприменимы. NULL не равен ничему, даже другому NULL.
</details>

#### Перечислите различные типы связей.
<details>
<summary>Ответ</summary>

_Один-к-одному (One-to-One)_ - этот тип может быть определён как отношение между двумя таблицами, где каждая запись в одной таблице связана максимум с одной записью в другой таблице.
_Один-ко-многим и Многие-к-одному (One-to-Many & Many-to-One)_ - это наиболее часто используемое отношение, когда запись в таблице связана с несколькими записями в другой таблице.
_Многие-ко-многим (Many-to-Many)_ - этот тип используется в случаях, когда для определения отношения требуется несколько экземпляров с обеих сторон.
</details>


#### Что такое схема Звезда и Снежинка? Опишите их сходства и отличия.
<details>
<summary>Ответ</summary>
Схемы «звезда» и «снежинка» — это два способа структурировать хранилище данных.

Схема типа «звезда» имеет централизованное хранилище данных, которое хранится в таблице фактов. Схема разбивает таблицу фактов на ряд денормализованных таблиц измерений. Таблица фактов содержит агрегированные данные, которые будут использоваться для составления отчетов, а таблица измерений описывает хранимые данные.

Денормализованные проекты менее сложны, потому что данные сгруппированы. Таблица фактов использует только одну ссылку для присоединения к каждой таблице измерений. Более простая конструкция звездообразной схемы значительно упрощает написание сложных запросов.

Схема типа «снежинка» отличается тем, что использует нормализованные данные. Нормализация означает эффективную организацию данных так, чтобы все зависимости данных были определены, и каждая таблица содержала минимум избыточности. Таким образом, отдельные таблицы измерений разветвляются на отдельные таблицы измерений.

Схема «снежинки» использует меньше дискового пространства и лучше сохраняет целостность данных. Основным недостатком является сложность запросов, необходимых для доступа к данным — каждый запрос должен пройти несколько соединений таблиц, чтобы получить соответствующие данные.
Примеры схем звезда и снежинка.
</details>

#### Что такое таблица фактов и таблица измерений?

Таблицы фактов — это таблицы, записи которых являются неизменяемыми "фактами", такими как журналы служб и сведения об измерениях. Записи постепенно добавляются в таблицу потоковой передачей или большими блоками. Записи остаются там до тех пор, пока они не будут удалены из-за затрат или из-за потери их стоимости. В противном случае записи никогда не обновляются.

Данные сущностей иногда хранятся в фактических таблицах, где данные сущности изменяются медленно. Например, данные о какой-либо физической сущности, такой как офисное оборудование, которое редко меняет расположение. Так как данные в Kusto являются неизменяемыми, обычно каждая таблица содержит два столбца:

Столбец идентификатора (string), который идентифицирует сущность
Столбец метки времени последнего изменения (datetime)
Затем извлекается только последняя запись для каждого удостоверения сущности.

Таблицы измерений
Таблицы измерений:

Хранение ссылочных данных, таких как таблицы подстановки, от идентификатора сущности до ее свойств
Хранение данных, подобных snapshot, в таблицах, все содержимое которых изменяется в одной транзакции
Таблицы измерений не регулярно помечаются с новыми данными. Вместо этого все содержимое данных обновляется одновременно с помощью таких операций, как .set-or-replace, .move extents или .rename tables.

Иногда таблицы измерений могут быть производными от таблиц фактов. Этот процесс можно выполнить с помощью политики обновления в таблице фактов с запросом к таблице, которая принимает последнюю запись для каждой сущности.

Различения таблиц фактов и измерений
В Kusto существуют процессы, которые различают таблицы фактов и таблицы измерений. Один из них — непрерывный экспорт.

Эти механизмы гарантированно обрабатывают данные в фактических таблицах точно один раз. Они полагаются на механизм курсора базы данных .

Например, при каждом выполнении задания непрерывного экспорта экспортируются все записи, которые были приема с момента последнего обновления курсора базы данных. Задания непрерывного экспорта должны различать таблицы фактов и таблицы измерений. Таблицы фактов обрабатывают только недавно обработанные данные, а таблицы измерений используются в качестве подстановок. Таким образом, необходимо учитывать всю таблицу.

Невозможно пометить таблицу как таблицу фактов или таблицу измерений. Способ приема данных в таблицу и способ ее использования определяет ее тип.






















